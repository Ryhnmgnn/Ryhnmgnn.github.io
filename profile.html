
<!DOCTYPE html>
<html lang="id">
<head>
    <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Pengguna</title>
    <link rel="stylesheet" href="css/profile.css">
    
<script type="module">
import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-auth.js";
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";

const firebaseConfig = {
apiKey: "AIzaSyAhpOEebU611SJowgfx5lznZvdKn1yOxLI",
authDomain: "login-e7b9d.firebaseapp.com",
databaseURL: "https://login-e7b9d-default-rtdb.firebaseio.com",
projectId: "login-e7b9d",
storageBucket: "login-e7b9d.appspot.com",
messagingSenderId: "75858994181",
appId: "1:75858994181:web:5ce453a242c0fc1efd286c",
measurementId: "G-BB5D0GRH7Z"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
let logoutButton = document.getElementById("logout-button");
console.log(logoutButton);

logoutButton.addEventListener("click", (e) => {
  const auth = getAuth(app);
  signOut(auth)
    .then(() => {
      alert("sukses logout");
      location.href = "login.html";
    })
    .catch((error) => {});
});
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const favoritUl = document.getElementById('favorit-list');
        
        const favorit = JSON.parse(localStorage.getItem('favorit')) || [];
        favorit.forEach((lagu, index) => {
            const li = document.createElement('li');
            li.classList.add('song-item');
            li.textContent = `${lagu.judul}`;
            
            const playButton = document.createElement('button');
            playButton.textContent = 'Putar Lagu';
            playButton.addEventListener('click', function() {
                putarLagu(lagu.src);
            });
            
            const hapusButton = document.createElement('button');
            hapusButton.textContent = 'Hapus dari Favorit';
            hapusButton.addEventListener('click', function() {
                hapusDariFavorit(lagu.src);
                favoritUl.removeChild(li);
            });
            
            li.appendChild(playButton);
            li.appendChild(hapusButton);
            favoritUl.appendChild(li);
        });
    });

    function putarLagu(src) {
        const audioPlayer = document.getElementById('audio-player');
        const judulLagu = document.getElementById('judul-lagu');
        
        audioPlayer.src = src;
        judulLagu.textContent = `Sedang Memutar: ${src}`;
        audioPlayer.play();
        
        // Mengulang lagu secara otomatis
        audioPlayer.addEventListener('ended', function() {
            audioPlayer.currentTime = 0;
            audioPlayer.play();
        });
    }

    function hapusDariFavorit(src) {
        let favorit = JSON.parse(localStorage.getItem('favorit')) || [];
        
        favorit = favorit.filter(song => song.src !== src);
        localStorage.setItem('favorit', JSON.stringify(favorit));
        alert('Lagu dihapus dari Favorit!');
    }
</script>
<script>
function jedaLagu() {
        const audioPlayer = document.getElementById('audio-player');
        if (audioPlayer.paused) {
            audioPlayer.play();
        } else {
            audioPlayer.pause();
        }
    }

    function gantiLaguOtomatis() {
        const audioPlayer = document.getElementById('audio-player');
        const favorit = JSON.parse(localStorage.getItem('favorit')) || [];
        
        let currentIndex = 0;
        audioPlayer.src = favorit[currentIndex].src;
        audioPlayer.play();
        
        audioPlayer.addEventListener('ended', function() {
            currentIndex = (currentIndex + 1) % favorit.length;
            audioPlayer.src = favorit[currentIndex].src;
            audioPlayer.play();
        });
    }
</script>

</head>
<body>
    <header>
        <style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

header {
    background-color: #333;
    color: white;
    text-align: center;
    padding: 10px 0;
}

.menu-area-main {
    display: flex;
    justify-content: center;
    list-style: none;
    padding: 0;
}

.menu-area-main li {
    margin-right: 10px;
}

#logout-button {
    background-color: #333;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
}

main {
    padding: 20px;
}

.song-list {
    list-style-type: none;
    padding: 0;
}

.song-item {
    display: flex;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid #ccc;
}

button {
    padding: 5px 10px;
    margin-right: 5px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #0056b3;
}
        </style>
        <h1>Selamat Datang </span></h1>
        <input type="file" id="fileInput" style="display: none">
        <label for="fileInput">
            <img id="profileImage" src="images/profilelogo.png" style="max-width: 200px; cursor: pointer;">
        </label>
        <button id="deleteImage">Hapus Foto</button>
        <ul class="menu-area-main">
            <li> <a href="index.html">Home</a> </li>
            <li> <a href="musik_menu.html">Music</a> </li>
            <li> <button id="logout-button" value="ok">Logout</button> </li>
        </ul>
    </header>
    <main>
        <style>
            #favorit-list {
                list-style: none;
                padding: 0;
            }
        
            .song-item {
                display: flex;
                align-items: center;
                padding: 10px;
                border-bottom: 1px solid #ccc;
            }
        
            .song-item:hover {
                background-color: #f9f9f9;
            }
        
            .song-item button {
                padding: 5px 10px;
                margin-right: 5px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
        
            .song-item button:hover {
                background-color: #0056b3;
            }
            #audio-player {
        display: none;
    }
    #card {
  display: auto;
  justify-content: left;
  align-items: flex-start;
  border-radius: 25px;
  box-shadow: 0 0 20px rgba(0,0,0,.5);
    }
    body {
        background: linear-gradient(0deg, rgb(17, 134, 99) 27%, rgb(0, 255, 132) 75%);
}
#judul-lagu {
    display: none;
}
.playlist-section:nth-child(3) {
    display: none;
  }
  
</style>
<style>
    #fileInput {
        display: none;
    }

    label {
        display: block;
        text-align: center;
        margin-bottom: 20px;
    }

    #profileImage {
        height: 150px;
        width: 150px;
        border-radius: 50%;
        object-fit: cover;
        background: #dfdfdf;
    }
    #profileImage:hover {
            transform: scale(1.1);
        }
    #deleteImage {
        display: block;
        margin: 10px auto;
        padding: 5px 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #deleteImage:hover {
        background-color: #007bff;
    }
</style>
<style>
    img{
        height: 150px;
        width: 150px;
        border-radius: 50%;
        object-fit: cover;
        background: #dfdfdf;
    }
    </style>
    <style>
        /* Menyembunyikan teks "No file chosen" pada input file */
        input[type="file"] {
            color: transparent;
        }
    </style>
        <h1>Daftar Lagu Favorit</h1>
        <button onclick="jedaLagu()">Jeda Lagu</button>
        <button onclick="gantiLaguOtomatis()">Ganti Lagu Otomatis</button>
        <div id='card'>
        <audio id="audio-player" controls></audio>
        <p id="judul-lagu"></p>
        <ul id="favorit-list">
            <!-- Daftar lagu favorit akan ditampilkan di sini -->
        </ul>
        </section>
    </main>
    <script>
        const image = document.getElementById("profileImage");
        const fileInput = document.getElementById("fileInput");
        const deleteButton = document.getElementById("deleteImage");

        fileInput.addEventListener("change", () => {
            const file = fileInput.files[0];
            const imageUrl = URL.createObjectURL(file);
            image.src = imageUrl;
            localStorage.setItem("profileImage", imageUrl);
            deleteButton.style.display = "block";
        });

        deleteButton.addEventListener("click", () => {
            image.src = "https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png";
            localStorage.removeItem("profileImage");
            deleteButton.style.display = "none";
        });

        window.addEventListener("load", () => {
            const savedImageUrl = localStorage.getItem("profileImage");
            if (savedImageUrl) {
                image.src = savedImageUrl;
                deleteButton.style.display = "block";
            }
        });

        window.addEventListener("beforeunload", () => {
            // Uncomment the line below if you want to clear localStorage when the tab is closed
            // localStorage.removeItem("profileImage");
        });
    </script>
    
</body>
</html>
